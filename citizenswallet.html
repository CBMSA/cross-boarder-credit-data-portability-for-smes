<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SadiPay â€” Social Â· Pay Â· Market Â· Trade</title>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
:root {
  --bg:#f5f6f8;
  --card:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --accent:#0b5cff;
}
[data-theme="dark"] {
  --bg:#0b0e11;
  --card:#1e2329;
  --text:#eaecef;
  --muted:#848e9c;
  --accent:#f0b90b;
}
* { box-sizing:border-box; }
body {
  margin:0;
  font-family:system-ui,-apple-system;
  background:var(--bg);
  color:var(--text);
}
header {
  height:56px;
  background:var(--card);
  border-bottom:1px solid #e5e7eb;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 16px;
}
.logo { font-weight:700; }
.app {
  display:flex;
  height:calc(100vh - 56px);
}
.sidebar {
  width:64px;
  background:var(--card);
  border-right:1px solid #e5e7eb;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-top:8px;
}
.sidebar button {
  background:none;
  border:none;
  font-size:20px;
  padding:12px;
  cursor:pointer;
  color:var(--muted);
}
.sidebar button:hover { color:var(--accent); }
main {
  flex:1;
  padding:16px;
  overflow:auto;
}
.page { display:none; }
.page.active { display:block; }

.card {
  background:var(--card);
  border-radius:10px;
  padding:16px;
  margin-bottom:12px;
}

.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:12px;
}

.chat-layout {
  display:grid;
  grid-template-columns:260px 1fr;
  height:75vh;
  background:var(--card);
  border-radius:10px;
  overflow:hidden;
}
.chat-list { border-right:1px solid #e5e7eb; padding:12px; }
.chat-window { padding:12px; }

button.primary {
  background:var(--accent);
  color:#000;
  border:none;
  padding:10px;
  border-radius:6px;
  cursor:pointer;
}
button.outline {
  border:1px solid var(--accent);
  background:none;
  color:var(--accent);
  padding:10px;
  border-radius:6px;
  cursor:pointer;
}
small { color:var(--muted); }
</style>
</head>

<body data-theme="light">

<header>
  <div class="logo">SadiPay</div>
  <div>
    <button onclick="toggleTheme()">ðŸŒ“</button>
    <span id="userRole" style="margin-left:10px">Observer</span>
  </div>
</header>

<div class="app">

<aside class="sidebar">
  <button onclick="go('home')"><i class="bi bi-house"></i></button>
  <button onclick="go('chat')"><i class="bi bi-chat"></i></button>
  <button onclick="go('pay')"><i class="bi bi-credit-card"></i></button>
  <button onclick="go('market')"><i class="bi bi-bag"></i></button>
  <button onclick="go('trade')"><i class="bi bi-graph-up"></i></button>
  <button onclick="go('admin')"><i class="bi bi-shield-check"></i></button>
</aside>

<main>

<section id="home" class="page active">
  <div class="card">
    <h2>Welcome to SadiPay</h2>
    <p class="muted">
      Social-first financial platform. Observer-safe. Regulator-ready.
    </p>
  </div>
</section>

<section id="chat" class="page">
  <h3>Chats</h3>
  <div class="chat-layout">
    <div class="chat-list">Contacts (Supabase)</div>
    <div class="chat-window">Messages</div>
  </div>
</section>

<section id="pay" class="page">
  <h3>Wallet</h3>
  <div class="card">
    <h1>R 0.00</h1>
    <small>ZAR Balance</small>
  </div>
  <div class="grid">
    <button class="primary">Send</button>
    <button class="outline">Receive</button>
    <button class="outline">Crypto</button>
  </div>
</section>

<section id="market" class="page">
  <h3>Marketplace</h3>
  <div class="grid">
    <div class="card">
      <strong>Product</strong>
      <p>Escrow protected</p>
      <button class="primary">Buy</button>
    </div>
  </div>
</section>

<section id="trade" class="page">
  <h3>Markets</h3>
  <div class="card">
    <strong>BTC / ZAR</strong>
    <h2 id="btcPrice">Loadingâ€¦</h2>
    <small>View-only Â· Public prices</small>
  </div>
</section>

<section id="admin" class="page">
  <h3>Compliance Dashboard</h3>
  <div class="card">
    <ul>
      <li>Users (read-only)</li>
      <li>Messages (audit)</li>
      <li>Ads</li>
    </ul>
  </div>
</section>

</main>
</div>

<script>
/* ========= SUPABASE ========= */
const SUPABASE_URL = "https://jbhhfzbhcvzxtthhmfhz.supabase.co";
const SUPABASE_ANON_KEY = "YOUR_PUBLIC_ANON_KEY";
const supabase = supabasejs.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

/* ========= ROUTER ========= */
function go(p) {
  document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));
  document.getElementById(p).classList.add('active');
  location.hash = p;
}
window.onload = () => go(location.hash.replace('#','')||'home');

/* ========= THEME ========= */
function toggleTheme() {
  document.body.dataset.theme =
    document.body.dataset.theme === "dark" ? "light" : "dark";
}

/* ========= PRICE DEMO ========= */
fetch("https://api.coindesk.com/v1/bpi/currentprice/BTC.json")
.then(r=>r.json())
.then(d=>{
  document.getElementById("btcPrice").innerText =
    "R " + Math.round(d.bpi.USD.rate_float * 19);
});
</script>

</body>
</html>