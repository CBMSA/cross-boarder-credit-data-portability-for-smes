<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SadiPay â€” Social Â· Pay Â· Market Â· Trade</title>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
<!-- Supabase v2 -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
:root {
  --bg:#f5f6f8;
  --card:#ffffff;
  --text:#111827;
  --muted:#6b7280;
  --accent:#0b5cff;
}
[data-theme="dark"] {
  --bg:#0b0e11;
  --card:#1e2329;
  --text:#eaecef;
  --muted:#848e9c;
  --accent:#f0b90b;
}
* { box-sizing:border-box; }
body {
  margin:0;
  font-family:system-ui,-apple-system;
  background:var(--bg);
  color:var(--text);
}
header {
  height:56px;
  background:var(--card);
  border-bottom:1px solid #e5e7eb;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 16px;
}
.logo {
  font-weight:700;
  display:flex;
  align-items:center;
  gap:8px;
}
.logo img { height:32px; width:auto; }
.app {
  display:flex;
  height:calc(100vh - 56px);
}
.sidebar {
  width:64px;
  background:var(--card);
  border-right:1px solid #e5e7eb;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-top:8px;
}
.sidebar button {
  background:none;
  border:none;
  font-size:20px;
  padding:12px;
  cursor:pointer;
  color:var(--muted);
}
.sidebar button:hover { color:var(--accent); }
main {
  flex:1;
  padding:16px;
  overflow:auto;
}
.page { display:none; }
.page.active { display:block; }

.card {
  background:var(--card);
  border-radius:10px;
  padding:16px;
  margin-bottom:12px;
}

.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:12px;
}

.chat-layout {
  display:grid;
  grid-template-columns:260px 1fr;
  height:75vh;
  background:var(--card);
  border-radius:10px;
  overflow:hidden;
}
.chat-list { border-right:1px solid #e5e7eb; padding:12px; overflow:auto; }
.chat-window { padding:12px; overflow:auto; }

button.primary {
  background:var(--accent);
  color:#fff;
  border:none;
  padding:10px;
  border-radius:6px;
  cursor:pointer;
}
button.outline {
  border:1px solid var(--accent);
  background:none;
  color:var(--accent);
  padding:10px;
  border-radius:6px;
  cursor:pointer;
}
small { color:var(--muted); }
footer {
  text-align:center;
  font-size:0.8rem;
  color:var(--muted);
  padding:12px 0;
}
</style>
</head>

<body data-theme="light">

<header>
  <div class="logo">
    <img src="https://via.placeholder.com/120x32?text=SadiPay" alt="SadiPay Logo" />
    SadiPay
  </div>
  <div>
    <button onclick="toggleTheme()">ðŸŒ“</button>
    <span id="userRole" style="margin-left:10px">Observer</span>
  </div>
</header>

<div class="app">

<aside class="sidebar">
  <button onclick="go('home')"><i class="bi bi-house"></i></button>
  <button onclick="go('chat')"><i class="bi bi-chat"></i></button>
  <button onclick="go('pay')"><i class="bi bi-credit-card"></i></button>
  <button onclick="go('market')"><i class="bi bi-bag"></i></button>
  <button onclick="go('trade')"><i class="bi bi-graph-up"></i></button>
  <button onclick="go('admin')"><i class="bi bi-shield-check"></i></button>
</aside>

<main>

<section id="home" class="page active">
  <div class="card">
    <h2>Welcome to SadiPay</h2>
    <p class="muted">
      Social-first financial platform. Observer-safe. Regulator-ready.
    </p>
    <button class="primary" onclick="go('chat')">Start Chat</button>
  </div>
</section>

<section id="chat" class="page">
  <h3>Chats</h3>
  <div class="chat-layout">
    <div class="chat-list" id="contactsList">Loading contactsâ€¦</div>
    <div class="chat-window" id="chatWindow">Select a contact to chat.</div>
  </div>
  <div style="margin-top:8px;">
    <input type="text" id="messageInput" placeholder="Message" style="width:70%">
    <button class="primary" id="sendBtn">Send</button>
  </div>
</section>

<section id="pay" class="page">
  <h3>Wallet</h3>
  <div class="card">
    <h1>R 0.00</h1>
    <small>ZAR Balance</small>
  </div>
  <div class="grid">
    <button class="primary">Send</button>
    <button class="outline">Receive</button>
    <button class="outline">Crypto</button>
  </div>
</section>

<section id="market" class="page">
  <h3>Marketplace</h3>
  <div class="grid">
    <div class="card">
      <strong>Product</strong>
      <p>Escrow protected</p>
      <button class="primary">Buy</button>
    </div>
    <div class="card">
      <strong>Product 2</strong>
      <p>Escrow protected</p>
      <button class="primary">Buy</button>
    </div>
  </div>
</section>

<section id="trade" class="page">
  <h3>Markets</h3>
  <div class="card">
    <strong>BTC / ZAR</strong>
    <h2 id="btcPrice">Loadingâ€¦</h2>
    <small>View-only Â· Public prices</small>
  </div>
  <div class="card">
    <strong>ETH / ZAR</strong>
    <h2 id="ethPrice">Loadingâ€¦</h2>
  </div>
</section>

<section id="admin" class="page">
  <h3>Compliance Dashboard</h3>
  <div class="card">
    <ul>
      <li>Users (read-only)</li>
      <li>Messages (audit)</li>
      <li>Ads</li>
      <li>Observer / regulator demo mode</li>
    </ul>
  </div>
</section>

</main>
</div>

<footer>Â© 2026 SadiCoin Tech. All rights reserved.</footer>

<script>
/* ========= SUPABASE ========= */
const SUPABASE_URL = "https://jbhhfzbhcvzxtthhmfhz.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpiaGhmemJoY3Z6eHR0aGhtZmh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NzUxMDAsImV4cCI6MjA4MTA1MTEwMH0.86HR8bkhiNK4JjpDsIyAtu9l9x83UjlMG-mYGc_adJc";
const supabase = supabasejs.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

/* ========= PAGE NAV ========= */
function go(page) {
  document.querySelectorAll('.page').forEach(x=>x.classList.remove('active'));
  document.getElementById(page).classList.add('active');
  location.hash = page;
}
window.onload = () => go(location.hash.replace('#','')||'home');

/* ========= THEME ========= */
function toggleTheme() {
  document.body.dataset.theme =
    document.body.dataset.theme === "dark" ? "light" : "dark";
}

/* ========= DEMO PRICES ========= */
fetch("https://api.coindesk.com/v1/bpi/currentprice/BTC.json")
.then(r=>r.json())
.then(d=>{
  document.getElementById("btcPrice").innerText = "R " + Math.round(d.bpi.USD.rate_float * 19);
});
fetch("https://api.coinbase.com/v2/prices/ETH-USD/spot")
.then(r=>r.json())
.then(d=>{
  document.getElementById("ethPrice").innerText = "R " + Math.round(d.data.amount * 19);
});

/* ========= DEMO CONTACTS & CHAT ========= */
let currentUser = { id: "OBS12345" };
let activeContact = null;

async function loadContacts() {
  const contactsList = document.getElementById("contactsList");
  contactsList.innerHTML = "<div>Contact 1</div><div>Contact 2</div>";
}
loadContacts();

document.getElementById("sendBtn").onclick = () => {
  const msgInput = document.getElementById("messageInput");
  if(!msgInput.value) return;
  const win = document.getElementById("chatWindow");
  const div = document.createElement("div");
  div.innerText = "You: " + msgInput.value;
  win.appendChild(div);
  msgInput.value = "";
  win.scrollTop = win.scrollHeight;
};
</script>

</body>
</html